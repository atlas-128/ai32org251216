---
// src/pages/index.astro
// Project: Ai32.org
// Version: 251219-Comparison (Side-by-Side Demo)
// Location: Amherst, MA
// Dev: Terry Deng & Gemini
---

<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Ai32.org | Project 251218</title>
    <style>
      /* --- æ ¸å¿ƒåŸºç¡€æ ·å¼ --- */
      :root {
        --font-serif: "Georgia", "Times New Roman", serif;
        --font-mono: "Menlo", "Consolas", "Monaco", monospace;
        --color-bg: #ffffff;
        --color-text: #111111;
        --color-accent: #d32f2f;
        --color-b32: #2E7D32; /* ç»¿è‰² */
        --color-b64: #1565C0; /* è“è‰² */
      }
      body {
        font-family: var(--font-serif);
        background-color: var(--color-bg);
        color: var(--color-text);
        max-width: 1200px; /* åŠ å®½é¡µé¢ä»¥å®¹çº³å·¦å³å¯¹æ¯” */
        margin: 0 auto;
        padding: 40px 20px;
        line-height: 1.6;
      }
      h1 { font-size: 2.5rem; font-weight: bold; margin-bottom: 0.5rem; letter-spacing: -0.05em; }
      .meta {
        font-family: var(--font-serif); font-size: 0.9rem; color: #555;
        margin-bottom: 3rem; border-left: 3px solid #333; padding-left: 15px;
      }
      h2 {
        font-size: 1.6rem; margin-top: 3rem; border-bottom: 2px solid #eee;
        padding-bottom: 10px; display: flex; align-items: center; gap: 10px;
      }
      
      /* --- æ¼”ç¤ºåŒºåŸŸå®¹å™¨ --- */
      .demo-section {
        background: #f8f9fa;
        border: 1px solid #e0e0e0;
        padding: 25px;
        border-radius: 8px;
        margin-bottom: 40px;
      }
      
      textarea {
        width: 100%; height: 120px; padding: 15px;
        font-family: var(--font-mono); border: 2px solid #ccc; border-radius: 6px;
        margin-bottom: 20px; font-size: 1rem; resize: vertical;
        box-shadow: inset 0 2px 4px rgba(0,0,0,0.05);
      }

      .btn-group { display: flex; gap: 15px; margin-bottom: 25px; }
      button {
        padding: 12px 24px; font-size: 1rem; font-weight: bold;
        border: none; border-radius: 6px; cursor: pointer;
        transition: transform 0.1s, opacity 0.2s; font-family: var(--font-serif);
        color: white; box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      }
      button:active { transform: scale(0.98); }
      .btn-a { background-color: var(--color-b32); }
      .btn-b { background-color: var(--color-b64); }

      /* --- æ ¸å¿ƒä¿®æ”¹ï¼šå·¦å³å¯¹ç…§å¸ƒå±€ Grid --- */
      .comparison-grid {
        display: grid;
        grid-template-columns: 1fr 1fr; /* å·¦å³å„å  50% */
        gap: 20px;
        align-items: start;
      }
      
      /* æ‰‹æœºç«¯è‡ªåŠ¨å˜ä¸ºä¸Šä¸‹å †å  */
      @media (max-width: 768px) {
        .comparison-grid { grid-template-columns: 1fr; }
      }

      .result-card {
        background: white;
        border: 1px solid #eee;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.03);
        display: none; /* é»˜è®¤éšè—ï¼Œç‚¹å‡»åæ˜¾ç¤º */
      }
      
      .result-card.card-a { border-top: 5px solid var(--color-b32); }
      .result-card.card-b { border-top: 5px solid var(--color-b64); }

      .card-header {
        font-weight: bold; font-size: 1.1rem; margin-bottom: 15px;
        padding-bottom: 10px; border-bottom: 1px solid #f0f0f0;
      }
      
      .output-group { margin-bottom: 20px; }
      .output-label {
        display: block; font-size: 0.8rem; color: #888;
        margin-bottom: 5px; text-transform: uppercase; letter-spacing: 0.05em;
      }
      .output-val {
        font-family: var(--font-mono);
        word-break: break-all; /* å…³é”®ï¼šé˜²æ­¢é•¿æ•°å­—æ’‘ç ´å¸ƒå±€ */
        font-size: 1rem;
        font-weight: bold;
        line-height: 1.4;
      }
      
      .text-green { color: var(--color-b32); }
      .text-blue { color: var(--color-b64); }
      .text-dark { color: #333; font-size: 0.9rem; }

      /* --- åŸå¸‚åˆ—è¡¨æ ·å¼ --- */
      .city-section { margin-bottom: 2rem; }
      .city-title { font-weight: bold; font-size: 1.1rem; }
      .city-desc { font-size: 0.95rem; color: #444; margin-bottom: 0.5rem; }
      .code-block {
        font-family: var(--font-mono); background: #f4f4f4;
        padding: 10px; border-radius: 4px; word-break: break-all;
        font-size: 0.9rem; color: var(--color-accent);
      }
      
      /* åº•éƒ¨ç®€å•è½¬æ¢å™¨ */
      .simple-converter { margin-top: 20px; padding: 20px; background: white; border: 1px solid #eee; border-radius: 8px; }
      .simple-input { width: 100%; padding: 8px; margin-bottom: 10px; font-family: monospace; font-size: 1.1rem; }
    </style>
  </head>
  <body>
    <h1>Ai32.org</h1>
    <div class="meta">
      <p>Project 251219 | Comparative Demo Version</p>
      <p>Loc: Amherst, MA (01002)</p>
      <p>Dev: Astro on Coolify (Co-piloted by Gemini)</p>
    </div>

    <h2>ğŸš€ æ–‡æœ¬æœ‰æŸç¼–ç å¯¹ç…§æ¼”ç¤º</h2>
    <div class="demo-section">
      <label class="output-label">è¾“å…¥ä»»æ„äººç±»è‡ªç„¶è¯­è¨€ (String01)</label>
      <textarea id="demoInput" placeholder="è¯·è¾“å…¥ä¸€æ®µè¾ƒé•¿çš„æ–‡æœ¬ä»¥è§‚å¯Ÿå‹ç¼©æ•ˆæœ...">Hello! How Are you. I' am Terry Deng(è€é‚“),What's your name?Do you like your Father?I love your Motherâ€¦â€¦å“ˆå“ˆ!?!</textarea>
      
      <div class="btn-group">
        <button class="btn-a" onclick="processA()">A: æ‰§è¡Œ Ai-Base32 (é‡è›®å‹ç¼©)</button>
        <button class="btn-b" onclick="processB()">B: æ‰§è¡Œ Ai-Base64 (é«˜ä¿çœŸ)</button>
      </div>

      <div class="comparison-grid">
        
        <div id="cardA" class="result-card card-a">
          <div class="card-header text-green">A: Ai-Base32 ç»“æœ</div>
          
          <div class="output-group">
            <span class="output-label">A2: å‹ç¼©åçš„å­—ç¬¦ä¸² (String)</span>
            <div id="outA_str" class="output-val text-green"></div>
            <div style="font-size:0.8rem; color:#999; margin-top:5px;">
              * ä¸¢å¤±å¤§å°å†™/æ ‡ç‚¹ï¼Œç‰¹æ®Šç¬¦è½¬ä¹‰
            </div>
          </div>
          
          <div class="output-group">
            <span class="output-label">A1: åè¿›åˆ¶å…¨æ¯æ•° (Base10)</span>
            <div id="outA_int" class="output-val text-dark"></div>
          </div>
        </div>

        <div id="cardB" class="result-card card-b">
          <div class="card-header text-blue">B: Ai-Base64 ç»“æœ</div>
          
          <div class="output-group">
            <span class="output-label">B2: é«˜ä¿çœŸå­—ç¬¦ä¸² (String)</span>
            <div id="outB_str" class="output-val text-blue"></div>
            <div style="font-size:0.8rem; color:#999; margin-top:5px;">
              * ä¿ç•™æ ‡ç‚¹ä¸è¯­ä¹‰ï¼Œé«˜å¯†åº¦å‹ç¼©
            </div>
          </div>
          
          <div class="output-group">
            <span class="output-label">B1: åè¿›åˆ¶å…¨æ¯æ•° (Base10)</span>
            <div id="outB_int" class="output-val text-dark"></div>
          </div>
        </div>

      </div>
    </div>

    <h2>âš¡ï¸ æ ‡å‡†æ•°å­—è½¬æ¢å™¨ (Base10 Input)</h2>
    <div class="simple-converter">
      <label class="output-label">è¾“å…¥çº¯æ•°å­— (Base10)</label>
      <input type="number" id="numInput" class="simple-input" value="251219" />
      
      <div style="margin-top:15px; display:grid; grid-template-columns: 100px 1fr; gap:10px; align-items:baseline;">
        <span class="text-green" style="font-weight:bold;">Ai-Base32</span>
        <span id="output32" class="output-val text-green">...</span>
        
        <span class="text-blue" style="font-weight:bold;">Ai-Base64</span>
        <span id="output64" class="output-val text-blue">...</span>
      </div>
    </div>

    <h2>ğŸ™ The Digital Cities</h2>

    <div class="city-section">
      <div class="city-title">Ai-Base32 (æ ¸å¿ƒåŸ - 32ä½)</div>
      <div class="city-desc">è§†è§‰é›¶æ··æ·†ï¼Œå‰”é™¤ L,O,Q,S,V,Z,_ã€‚ä¿ç•™ -ï¼Œå¼•å…¥ @ã€‚</div>
      <div class="code-block">0123456789ABCdeFGHiJKMnPRtuWXY-@</div>
    </div>

    <div class="city-section">
      <div class="city-title">Ai-Base64 (ä¼ è¾“åŸ - 64ä½)</div>
      <div class="city-desc">é«˜å¯†åº¦ä¼ è¾“ã€‚ç©ºæ ¼ä½äºæœ€åä¸€ä½ (Index 63)ã€‚</div>
      <div class="code-block">0123456789ABCdeFGHiJKMnPRtuWXY-@LQSVZ_.:()[]{}/?!+=*#$%&amp;&lt;&gt;,;|~^ </div>
    </div>

    <script is:inline>
      // 1. å®ªç« å®šä¹‰
      const CHARSET_32 = "0123456789ABCdeFGHiJKMnPRtuWXY-@";
      const EXTENSION_64 = "LQSVZ_.:()[]{}/?!+=*#$%&<>,;|~^ ";
      const CHARSET_64 = CHARSET_32 + EXTENSION_64;

      // 2. è§†è§‰æ˜ å°„å­—å…¸ (é‡è›®å‹ç¼©)
      const MAP_32 = {
        'l': '1', 'I': '1', '|': '1', 'L': '1',
        'o': '0', 'O': '0',
        's': '5', 'S': '5', 'z': '2', 'Z': '2',
        ' ': '-', '_': '-', 
        '!': 'i', '?': '7', '.': '-', ',': '-', 
        'D': 'd', 'E': 'e', 'f': 'F', 'g': 'G', 'h': 'H', 'j': 'J',
        'k': 'K', 'm': 'M', 'N': 'n', 'p': 'P', 'r': 'R', 'T': 't',
        'U': 'u', 'v': 'u', 'V': 'u', 'w': 'W', 'x': 'X', 'y': 'Y'
      };

      // 3. å‹ç¼©ä¸è½¬æ¢å‡½æ•°
      function compressText(text, charset, mapMode) {
        let result = "";
        for (let char of text) {
          let mappedChar = "";
          if (charset.includes(char)) {
            mappedChar = char;
          } else {
            if (mapMode === 32) {
               mappedChar = MAP_32[char] || MAP_32[char.toLowerCase()] || '@';
            } else {
               if (charset.includes(char.toUpperCase())) mappedChar = char.toUpperCase();
               else if (charset.includes(char.toLowerCase())) mappedChar = char.toLowerCase();
               else mappedChar = "#";
            }
          }
          result += mappedChar;
        }
        return result;
      }

      function fromBase(str, charset) {
        let val = 0n;
        const base = BigInt(charset.length);
        for (let i = 0; i < str.length; i++) {
          const char = str[i];
          const index = charset.indexOf(char);
          if (index === -1) continue;
          val = val * base + BigInt(index);
        }
        return val.toString();
      }

      function toBase(num, charset) {
        if (num === "" || isNaN(num)) return "";
        let n = BigInt(num);
        if (n < 0n) return "Error";
        if (n === 0n) return charset[0];
        let result = "";
        const base = BigInt(charset.length);
        while (n > 0n) {
          const remainder = n % base;
          result = charset[Number(remainder)] + result;
          n = n / base;
        }
        return result;
      }

      // 4. äº‹ä»¶å¤„ç† (ä¿®å¤äº†è¦†ç›–é—®é¢˜)
      
      // å¤„ç†æŒ‰é’® A
      function processA() {
        const input = document.getElementById('demoInput').value;
        const compressed = compressText(input, CHARSET_32, 32);
        const bigIntVal = fromBase(compressed, CHARSET_32);
        
        // å…³é”®ä¿®æ”¹ï¼šåªæ“ä½œ cardAï¼Œä¸è§¦ç¢° cardB
        const cardA = document.getElementById('cardA');
        cardA.style.display = 'block'; 
        
        document.getElementById('outA_str').textContent = compressed;
        document.getElementById('outA_int').textContent = bigIntVal;
      }

      // å¤„ç†æŒ‰é’® B
      function processB() {
        const input = document.getElementById('demoInput').value;
        const compressed = compressText(input, CHARSET_64, 64);
        const bigIntVal = fromBase(compressed, CHARSET_64);
        
        // å…³é”®ä¿®æ”¹ï¼šåªæ“ä½œ cardBï¼Œä¸è§¦ç¢° cardA
        const cardB = document.getElementById('cardB');
        cardB.style.display = 'block';
        
        document.getElementById('outB_str').textContent = compressed;
        document.getElementById('outB_int').textContent = bigIntVal;
      }

      // åº•éƒ¨è½¬æ¢å™¨é€»è¾‘
      const inputEl = document.getElementById('numInput');
      const out32El = document.getElementById('output32');
      const out64El = document.getElementById('output64');
      function updateBottom() {
        const val = inputEl.value;
        out32El.textContent = toBase(val, CHARSET_32);
        out64El.textContent = toBase(val, CHARSET_64);
      }
      inputEl.addEventListener('input', updateBottom);
      updateBottom();
    </script>
  </body>
</html>